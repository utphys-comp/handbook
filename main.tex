\RequirePackage{plautopatch}

% \documentclass[dvipdfmx]{jsbook}
\documentclass[uplatex,dvipdfmx]{jsbook}
% \documentclass{ltjsbook}

\usepackage{graphicx}
\usepackage[top=20truemm,bottom=20truemm,left=30truemm,right=20truemm]{geometry}
\usepackage{amsmath, amssymb}
\usepackage{fancybox}
\usepackage{here}
\usepackage{eclbkbox}
\usepackage{tcolorbox}
\usepackage[hidelinks]{hyperref}
\usepackage{url}
\usepackage[T1]{fontenc}

\newcommand{\nendo}{2023}
\newcommand{\hann}{\nendo 年度版}

\newcommand{\til}{\char`\~}
\newcommand{\promptn}{\$}
\newcommand{\prompt}{\$ }
\newcommand{\pager}{\textbf{less}}
\newcommand{\ctrl}[1]{\ovalbox{\mathstrut ctrl}-\ovalbox{\mathstrut #1}}
\newcommand{\esc}[1]{\leavevmode\ovalbox{\mathstrut Esc}-\ovalbox{\mathstrut #1}}
\newcommand{\ret}{\ovalbox{\mathstrut Enter}}
\newcommand{\spc}{\leavevmode\ovalbox{\mathstrut スペース}}
\newcommand{\BS}{\ovalbox{\mathstrut Backspace}\ あるいは \ovalbox{\mathstrut Delete}キー}
\newcommand{\cursor}{\vrule height8pt depth3pt width4pt\relax}
\newcommand{\itemf}[1]{\item \textbf{#1}}

\newsavebox{\fminibox}
\newenvironment{myframe}[2][\textwidth]%
{\vspace{12pt}\newline\begin{minipage}{#1}\textbf{#2}\newline%
    \begin{lrbox}{\fminibox}\begin{minipage}{#1}}%
{\end{minipage}\end{lrbox}\fbox{\usebox{\fminibox}}\end{minipage}\vspace{12pt}}

\newenvironment{myframe2}[1]{%
  \vspace{12pt}%
  \begin{breakbox}%
  {\parindent=0pt\textbf{\underline{#1}}}%
}{%
  \end{breakbox}\vspace{12pt}%
}

\newenvironment{myframe3}[1]{%
  \vspace{12pt}%
  {\parindent=0pt\textbf{\underline{#1}}}\quad%
}{%
  \vspace{12pt}
}

%%% 例環境
\newcounter{reidai}[section]
\def\thereidai{\thesection.\arabic{reidai}.}
\newenvironment{reidai}{%
  \refstepcounter{reidai}%
  \begin{myframe2}{例 \thereidai}%
  \baselineskip=12pt%
  \begin{quote}%
}{%
  \end{quote}%
  \end{myframe2}%
}

\newcounter{kekka}[section]
\def\thekekka{\thereidai}
\newenvironment{kekka}%
{\refstepcounter{kekka}
  \begin{myframe2}{結果 \thekekka}
  \baselineskip=12pt%
  \begin{quote}%
}{%
  \end{quote}%
  \end{myframe2}%
}


%%% 練習環境
\newenvironment{commandline2}{%
  %\begin{quote}
  \begin{tcolorbox}\tt%
}{%
  \end{tcolorbox}%
  %\end{quote}%
}

\newcounter{renshuu}[section]
\def\therenshuu{\thesection.\arabic{renshuu}.}
\newenvironment{renshuu}{%
  \refstepcounter{renshuu}%
  \begin{myframe3}{練習 \therenshuu}%
}{%
  \end{myframe3}%
}

\newenvironment{renshuu-answer}[1]{%
  \begin{myframe2}{練習 \ref{#1}}
  \begin{quote}%
}{%
  \end{quote}%
  \end{myframe2}%
}

\newcommand{\esckey}{\texttt{\ovalbox{Esc}}}
\newcommand{\tabkey}{\texttt{\ovalbox{Tab}}}
\newcommand{\typecom}[2][\ret]{\begin{quote}{\tt\prompt \underline{#2} }#1\end{quote}}
\newcommand{\typeans}[1]{\begin{quote}\tt#1 \end{quote}}

\def\clangpara#1{\paragraph{#1}\mbox{}\\}

\newenvironment{commandline}%
{\vspace{6pt}\newline\hspace{26pt}\begin{minipage}{\textwidth}}%
{\end{minipage}\vspace{6pt}}

\makeatletter
\@addtoreset{equation}{section}
\makeatother

% \def\labelitemi{$\Rightarrow$}

\pagestyle{plain}

\begin{document}
\thispagestyle{empty}
\pagestyle{empty}
\begin{titlepage}
    \vspace*{5cm}
    \begin{center}
        \textbf{\Huge 計算機実験ハンドブック}\\
        \vspace*{14cm}
        \textbf{\LARGE \hann}\\
        \vspace{1.0cm}
        \textbf{\LARGE 東京大学理学部物理学科}
    \end{center}
\end{titlepage}
\clearpage
\pagestyle{empty}
\cleardoublepage

\input{preface}
\clearpage
\input{history}
\cleardoublepage

\setcounter{page}{1}
\setcounter{tocdepth}{3}
\tableofcontents

\clearpage
\pagestyle{plain}
\cleardoublepage

\input{unix}

\input{clang}

\input{latex}

\end{document}
